name: Update reusable variables

on:
  schedule:
    - cron: '*/10 * * * *'

env:
  KIND_VERSION: ${{ vars.KIND_VERSION }}

jobs:
  update_reusable_variables:
    permissions: write-all
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@c85c95e3d7251135ab7dc9ce3241c5835cc595a9 # v3.5.3
      - name: Update reusable variables
        uses: mikefarah/yq@dd648994340a5d03225d97abf19c9bf1086c3f07 # 4.40.5
        with:
          cmd: yq -i '.on.workflow_call.outputs.kind_version.value=env(KIND_VERSION)' ${{ github.workspace }}/.github/workflows/reusable-variables.yaml
      - name: Raise a pull request
        uses: peter-evans/create-pull-request@153407881ec5c347639a548ade7d8ad1d6740e38 # v5.0.2
        with:
          commit-message: Update reusable variables.
          title: 🤖 Update reusable variables
          body: Update reusable variables. 🛠️
          base: main
          labels: automated-pr
          branch: update-reusable-variable
          delete-branch: true
        # run: |
        #   gh pr create --base main \
        #                --head update-reusable-variable \
        #                --title '🤖 Update reusable variables' \
        #                --body 'Update reusable variables. 🛠️' \
        #                --label 'auto-pr' \
        #                --title 'Update reusable variables.'
