name: Acceptance Tests [GKE]

on:
  workflow_dispatch:
    inputs:
      region:
        description: The GKE region
        default: northamerica-northeast1
      zone:
        description: The GKE zone
        default: northamerica-northeast1-a
      clusterVersion:
        description: The GKE cluster version
        default: 1.27
      nodeCount:
        description: The number of cluster nodes to provision
        default: 1
      instanceType:
        description: The type of GKE instance to use for cluster nodes
        default: e2-standard-2
      terraformVersion:
        description: Terraform version
        default: 1.5.6

# No Env variables here.

jobs:
  acceptance_tests_gke:
    uses: ./.github/workflows/reusable_acceptance_tests_eks.yaml
    with:
      region: ${{ inputs.region || vars.GOOGLE_REGION }}      
      zone: ${{ inputs.zone || vars.GOOGLE_ZONE }}
      clusterVersion: ${{ inputs.clusterVersion || vars.CLUSTER_VERSION }}
      nodeCount: ${{ inputs.nodeCount || vars.GOOGLE_NODE_COUNT }}
      instanceType: ${{ inputs.instanceType || vars.GOOGLE_INSTANCE_TYPE }}
      terraformVersion: ${{ inputs.terraformVersion || vars.TERRAFORM_VERSION }}
